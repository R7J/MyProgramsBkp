
# Monitoring halt and run status
rm haltref.txt
rm halt1.txt
rm haltresult.txt
rm runref.txt
rm run1.txt
rm runresult.txt
# Initial halt and run status 
halt
ps | grep -v grep | grep TimApp >> haltref.txt
ps | grep -v grep | grep ipv6app >> haltref.txt
ps | grep -v grep | grep dsrcproxy >> haltref.txt
ps |grep -v grep | grep Monitord >> haltref.txt
run
ps >> runref.txt
sleep 5
# After 1 minute halt and run status
halt
ps |grep -v grep |grep TimApp >> halt1.txt
ps | grep -v grep | grep ipv6app >> halt1.txt
ps | grep -v grep |grep dsrcproxy >> halt1.txt
ps | grep -v grep | grep Monitord >> halt1.txt
run 
ps > run1.txt  
# Difference of current and initial halt status
diff -u haltref.txt halt1.txt > haltresult.txt
a=`wc -w haltresult.txt | awk '{print $1}'`
if [ $a -eq 0 ]
then
	var="all preocesses in halt state are matched"
	echo "all preocesses in halt state are matched"
else
#	cat haltresult.txt
	var="some processes in halt state are not matching"
	echo "some processes in halt state are not matching"	
fi
# Difference of current and initial run status
diff -u runref.txt run1.txt > runresult.txt
b=`wc -w runresult.txt | awk '{print $1}'`
if [ $b -eq 0 ]
then
	var="all processes in run state are matched"
#	echo "all processes in run state are matched"
else
#	cat runresult.txt
	var="some processes in run state are not matching"
#	echo "some processes in run state are not matching"
fi		
